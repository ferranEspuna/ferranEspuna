---
layout: default
title: My New Subsection
---

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Newton's Fractal Shader</title>
</head>
    
<body>

    <nav style="position: absolute; top: 20px; left: 20px;">
        <a href="../index.html">&larr; Back to ferran.info</a>
    </nav>
    
    <h2>Newton's Fractal</h2>

    <div class="shader-window">
        <canvas class="glslCanvas" data-fragment-url="shader.frag" width="600" height="600"></canvas>
    </div>

    <div class="controls">
        <label for="iterSlider">Iterations:</label>
        <input type="range" id="iterSlider" min="0" max="30" value="5">
        <span id="iterValue">5</span>
    </div>

    <script type="module">
        import GlslCanvas from "https://esm.run/glslCanvas";
        
        window.addEventListener("load", async () => {
          const canvas = document.querySelector(".glslCanvas");
          const slider = document.getElementById("iterSlider");
          const iterDisplay = document.getElementById("iterValue");
        
          const sandbox = new GlslCanvas(canvas);
        
          const fragUrl = canvas.getAttribute("data-fragment-url");
          const fragShader = await (await fetch(fragUrl)).text();
          sandbox.load(fragShader);
        
          sandbox.setUniform("u_iterations", parseInt(slider.value, 10));
        
          slider.addEventListener("input", () => {
            const iterations = parseInt(slider.value, 10);
            sandbox.setUniform("u_iterations", iterations);
            iterDisplay.textContent = iterations;
          });
        });
    </script>







</body>
</html>
